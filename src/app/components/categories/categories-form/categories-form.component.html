<!-- Header gradient -->
<div class="relative bg-gradient-to-r from-[#3377bc] to-[#2a5f9a] p-6 text-white">
  <div class="text-center">
    <span class="text-sm px-2 rounded-md bg-white/20 text-white border border-white/30 mb-3">Categoria</span>
    <div class="text-3xl text-white font-semibold font-[Lora]">{{ data ? 'Editar Categoria' : 'Nova Categoria' }}</div>
  </div>
</div>
<mat-dialog-content>
  @if (hasDraft) {
  <div class="bg-yellow-100 text-yellow-800 p-4 rounded shadow mb-6 text-sm flex items-center gap-2">
    <span class="material-icons text-yellow-600">info</span>
    Você tem alterações salvas como rascunho.

    <span class="flex gap-2">
      <a class="text-yellow-600 underline cursor-pointer" (click)="newForm()">Começar uma nova</a>
    </span>
  </div>
  }

  <form [formGroup]="form" class="space-y-4">
    <mat-form-field class="custom-outline w-full mb-4">
      <mat-label>Nome da categoria</mat-label>
      <input #nameInput cdkFocusInitial matInput id="name" name="name" formControlName="name" />
      @if (form.get('name')?.invalid && form.get('name')?.touched) {
        <mat-error>
          @if (form.get('name')?.hasError('minlength')) {
            Nome deve ter pelo menos 3 caracteres
          }
          @else {
            Nome é obrigatório
          }
        </mat-error>
      }
    </mat-form-field>

    <div class="flex flex-row justify-end gap-2">
      <button (click)="close()" class="inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors">
        Cancelar
      </button>
      <button
        type="submit"
        (click)="save()"
        [disabled]="form.invalid"
         class="bg-[#3377bc] text-white inline-flex gap-2 items-center px-4 py-2 text-sm font-medium rounded-lg hover:bg-blue-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"
      >
        {{ data ? 'Salvar e Continuar Criando' : 'Criar e Continuar Criando' }}
      </button>
      <button type="submit" (click)="saveAndClose()" [disabled]="form.invalid"
        class="bg-[#3377bc] text-white inline-flex gap-2 items-center px-4 py-2 text-sm font-medium rounded-lg hover:bg-blue-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"
      >
        {{ data ? 'Salvar Alterações' : 'Criar Categoria' }}
      </button>
    </div>
  </form>
</mat-dialog-content>