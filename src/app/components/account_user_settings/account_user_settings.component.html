<form [formGroup]="accountUserForm" (ngSubmit)="onSubmit()" class="space-y-6">
  <!-- Nome e Sobrenome em grid responsivo -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <!-- Nome -->
    <div class="space-y-2">
      <label for="user_name" class="text-sm font-medium text-gray-700 flex items-center gap-2">
        <lucide-icon [img]="userIcon" class="w-4 h-4 text-gray-500"></lucide-icon>
        Nome
      </label>
      <div class="relative">
        <input 
          id="user_name"
          formControlName="user_name" 
          placeholder="Digite seu nome"
          [disabled]="isLoading"
          class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#3377bc] focus:border-[#3377bc] transition-colors"
          [class.border-red-300]="accountUserForm.get('user_name')?.invalid && accountUserForm.get('user_name')?.touched"
          [class.focus:ring-red-500]="accountUserForm.get('user_name')?.invalid && accountUserForm.get('user_name')?.touched">
        @if (accountUserForm.get('user_name')?.invalid && accountUserForm.get('user_name')?.touched) {
          <div class="absolute right-3 top-1/2 transform -translate-y-1/2">
            <lucide-icon [img]="alertIcon" class="w-4 h-4 text-red-500"></lucide-icon>
          </div>
        }
      </div>
      @if (accountUserForm.get('user_name')?.invalid && accountUserForm.get('user_name')?.touched) {
        <p class="text-sm text-red-600 flex items-center gap-1">
          <lucide-icon [img]="alertIcon" class="w-3 h-3"></lucide-icon>
          @if (accountUserForm.get('user_name')?.hasError('required')) {
            Nome é obrigatório
          } @else if (accountUserForm.get('user_name')?.hasError('minlength')) {
            Nome deve ter pelo menos 2 caracteres
          }
        </p>
      }
    </div>

    <!-- Sobrenome -->
    <div class="space-y-2">
      <label for="user_lastname" class="text-sm font-medium text-gray-700 flex items-center gap-2">
        <lucide-icon [img]="userIcon" class="w-4 h-4 text-gray-500"></lucide-icon>
        Sobrenome
      </label>
      <div class="relative">
        <input 
          id="user_lastname"
          formControlName="user_lastname" 
          placeholder="Digite seu sobrenome"
          [disabled]="isLoading"
          class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#3377bc] focus:border-[#3377bc] transition-colors"
          [class.border-red-300]="accountUserForm.get('user_lastname')?.invalid && accountUserForm.get('user_lastname')?.touched"
          [class.focus:ring-red-500]="accountUserForm.get('user_lastname')?.invalid && accountUserForm.get('user_lastname')?.touched">
        @if (accountUserForm.get('user_lastname')?.invalid && accountUserForm.get('user_lastname')?.touched) {
          <div class="absolute right-3 top-1/2 transform -translate-y-1/2">
            <lucide-icon [img]="alertIcon" class="w-4 h-4 text-red-500"></lucide-icon>
          </div>
        }
      </div>
      @if (accountUserForm.get('user_lastname')?.invalid && accountUserForm.get('user_lastname')?.touched) {
        <p class="text-sm text-red-600 flex items-center gap-1">
          <lucide-icon [img]="alertIcon" class="w-3 h-3"></lucide-icon>
          @if (accountUserForm.get('user_lastname')?.hasError('required')) {
            Sobrenome é obrigatório
          } @else if (accountUserForm.get('user_lastname')?.hasError('minlength')) {
            Sobrenome deve ter pelo menos 2 caracteres
          }
        </p>
      }
    </div>
  </div>

  <!-- Email -->
  <div class="space-y-2">
    <label for="user_email" class="text-sm font-medium text-gray-700 flex items-center gap-2">
      <lucide-icon [img]="mailIcon" class="w-4 h-4 text-gray-500"></lucide-icon>
      Email
    </label>
    <div class="relative">
      <input 
        id="user_email"
        type="email"
        formControlName="user_email" 
        placeholder="Digite seu email"
        [disabled]="isLoading"
        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#3377bc] focus:border-[#3377bc] transition-colors"
        [class.border-red-300]="accountUserForm.get('user_email')?.invalid && accountUserForm.get('user_email')?.touched"
        [class.focus:ring-red-500]="accountUserForm.get('user_email')?.invalid && accountUserForm.get('user_email')?.touched">
      @if (accountUserForm.get('user_email')?.invalid && accountUserForm.get('user_email')?.touched) {
        <div class="absolute right-3 top-1/2 transform -translate-y-1/2">
          <lucide-icon [img]="alertIcon" class="w-4 h-4 text-red-500"></lucide-icon>
        </div>
      }
    </div>
    @if (accountUserForm.get('user_email')?.invalid && accountUserForm.get('user_email')?.touched) {
      <p class="text-sm text-red-600 flex items-center gap-1">
        <lucide-icon [img]="alertIcon" class="w-3 h-3"></lucide-icon>
        @if (accountUserForm.get('user_email')?.hasError('required')) {
          Email é obrigatório
        } @else if (accountUserForm.get('user_email')?.hasError('email')) {
          Email inválido
        }
      </p>
    }
  </div>

  <!-- Botão de Submit -->
  <div class="flex justify-end pt-4">
    <button 
      type="submit"
      [disabled]="!accountUserForm.valid || isLoading"
      (click)="onSubmit()"
      class="bg-[#3377bc] text-white inline-flex gap-2 items-center px-6 py-3 text-sm font-medium rounded-lg hover:bg-blue-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
      @if (isLoading) {
        <div class="animate-spin rounded-full h-4 w-4 border-b-2 border-white"></div>
        <span>Salvando...</span>
      } @else {
        <lucide-icon [img]="saveIcon" class="w-4 h-4"></lucide-icon>
        <span>Salvar Dados Pessoais</span>
      }
    </button>
  </div>
</form>